<%- partial('../editor_sidebar') %>

<div id='content'>
    <div class="panel">
        <div class="panel-head">
            <span class="panel-head-title">编辑回复</span>
        </div>
        <div class='panel-body'>
      <% if(typeof(edit_error) !== 'undefined' && edit_error){ %>
      <div class="alert alert-error">
        <a class="close" data-dismiss="alert" href="#">&times;</a>
        <strong><%= edit_error %></strong>
      </div>
      <% } %>
      <% if(typeof(error) !== 'undefined' && error){ %>
      <div class="alert alert-error">
        <strong><%= error %></strong>
      </div>
      <% }else{ %>
      <form id='edit_reply_form' action='/reply/<%= reply_id %>/edit' method='post'>
        <fieldset>
          <div class='markdown_editor in_editor'>
            <div class='markdown_in_editor'>
              <textarea class='editor' name='t_content' rows='20'
                        placeholder='回复支持 Markdown 语法, 请注意标记代码'
                        autofocus
                      ><%= typeof(content) !== 'undefined' && content || '' %></textarea>

              <div class='editor_buttons'>
                  <button type="submit" class="submit_btn ui-button fr">确认修改</button>
                  <div class="clearfix"></div>
              </div>
            </div>

          </div>

          <input type='hidden' name='_csrf' value='<%= csrf %>'/>
        </fieldset>
      </form>
    </div>
    <% } %>
  </div>
</div>

<!-- markdown editor -->
<script src='/public/libs/editor/editor.js'></script>
<script src='/public/libs/webuploader/webuploader.withoutimage.js'></script>
<script src='/public/libs/editor/ext.js'></script>
<script>
  (function () {
    var editor = new Editor();
    editor.render($('.editor')[0]);
  })();
</script>
